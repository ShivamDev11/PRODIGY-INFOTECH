<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe - Your Ex or My Zero</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 800px;
            text-align: center;
            padding: 20px;
        }

        /* Intro Animation Styles */
        #intro {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 1s ease;
        }

        .game-title {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(50px);
        }

        .subtitle {
            font-size: 2rem;
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(50px);
        }

        .hero-text {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(50px);
        }

        .click-to-continue {
            padding: 15px 40px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 50px;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(50px);
        }

        .click-to-continue:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }

        /* Player Input Styles */
        #player-input {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 500px;
            margin: 0 auto;
        }

        .input-title {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #fdbb2d;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
        }

        .start-game-btn {
            padding: 15px 40px;
            background: #fdbb2d;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            color: #1a2a6c;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .start-game-btn:hover {
            background: #ffcc44;
            transform: translateY(-3px);
        }

        /* Game Board Styles */
        #game-container {
            display: none;
            width: 100%;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .player-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            width: 30%;
        }

        .player-info.active {
            border: 2px solid #fdbb2d;
            box-shadow: 0 0 15px rgba(253, 187, 45, 0.5);
        }

        .player-name {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .player-score {
            font-size: 1.5rem;
            margin-top: 5px;
        }

        .round-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
        }

        .round-title {
            font-size: 1.2rem;
        }

        .round-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #fdbb2d;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 10px;
            margin: 0 auto 30px;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1/1;
        }

        .cell {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cell:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .cell.x {
            color: #ff4d4d;
        }

        .cell.o {
            color: #4da6ff;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn {
            background: #4da6ff;
            color: white;
        }

        .new-game-btn {
            background: #fdbb2d;
            color: #1a2a6c;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Instructions Styles */
        #instructions {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 600px;
            margin: 0 auto;
            text-align: left;
        }

        .instructions-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #fdbb2d;
            text-align: center;
        }

        .instructions-list {
            margin-bottom: 25px;
        }

        .instructions-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .close-instructions {
            padding: 12px 25px;
            background: #fdbb2d;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: #1a2a6c;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        .close-instructions:hover {
            background: #ffcc44;
            transform: translateY(-3px);
        }

        /* Results Styles */
        #results {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 500px;
            margin: 0 auto;
        }

        .results-title {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #fdbb2d;
        }

        .winner-info {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4da6ff;
        }

        .loser-info {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #ff4d4d;
        }

        .final-scores {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
        }

        .player-result {
            text-align: center;
        }

        .player-result-name {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .player-result-score {
            font-size: 2rem;
            font-weight: 700;
        }

        .results-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .play-again-btn {
            padding: 12px 25px;
            background: #4da6ff;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .new-players-btn {
            padding: 12px 25px;
            background: #fdbb2d;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: #1a2a6c;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .results-buttons button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Sound Control */
        .sound-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
        }

        .sound-icon {
            font-size: 1.5rem;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .game-title {
                font-size: 2.5rem;
            }
            .subtitle {
                font-size: 1.5rem;
            }
            .hero-text {
                font-size: 2rem;
            }
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            .player-info {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Intro Animation -->
        <div id="intro">
            <h1 class="game-title">TIC TAC TOE</h1>
            <h2 class="subtitle">Your Ex or My Zero</h2>
            <div class="hero-text">Who will it be? Hero or Zero?</div>
            <button class="click-to-continue">Click to Continue</button>
        </div>

        <!-- Player Input Section -->
        <div id="player-input">
            <h2 class="input-title">Enter Player Names</h2>
            <div class="input-group">
                <label for="player1">Player 1 (X)</label>
                <input type="text" id="player1" placeholder="Enter Player 1 Name">
            </div>
            <div class="input-group">
                <label for="player2">Player 2 (O)</label>
                <input type="text" id="player2" placeholder="Enter Player 2 Name">
            </div>
            <button class="start-game-btn">Start Game</button>
        </div>

        <!-- Game Container -->
        <div id="game-container">
            <div class="game-header">
                <div class="player-info active" id="player1-info">
                    <div class="player-name" id="player1-name">Player 1</div>
                    <div class="player-score" id="player1-score">0</div>
                </div>
                <div class="round-info">
                    <div class="round-title">Round</div>
                    <div class="round-number" id="round-number">1/3</div>
                </div>
                <div class="player-info" id="player2-info">
                    <div class="player-name" id="player2-name">Player 2</div>
                    <div class="player-score" id="player2-score">0</div>
                </div>
            </div>
            <div class="game-board" id="game-board">
                <!-- Cells will be generated by JavaScript -->
            </div>
            <div class="game-controls">
                <button class="control-btn restart-btn" id="restart-round">Restart Round</button>
                <button class="control-btn new-game-btn" id="new-game">New Game</button>
                <button class="control-btn" id="show-instructions">How to Play</button>
            </div>
        </div>

        <!-- Instructions -->
        <div id="instructions">
            <h2 class="instructions-title">How to Play Tic Tac Toe</h2>
            <ul class="instructions-list">
                <li>The game is played on a 3x3 grid.</li>
                <li>Player 1 is <strong>X</strong> and Player 2 is <strong>O</strong>.</li>
                <li>Players take turns placing their marks in empty squares.</li>
                <li>The first player to get 3 of their marks in a row (horizontally, vertically, or diagonally) wins the round.</li>
                <li>If all 9 squares are filled and no player has 3 in a row, the round is a draw.</li>
                <li>The game consists of 3 rounds. The player who wins the most rounds wins the game.</li>
            </ul>
            <button class="close-instructions">Got It!</button>
        </div>

        <!-- Results Screen -->
        <div id="results">
            <h2 class="results-title">Game Results</h2>
            <div class="winner-info" id="winner-message">Player 1 Wins!</div>
            <div class="loser-info" id="loser-message">Player 2 Loses!</div>
            <div class="final-scores">
                <div class="player-result">
                    <div class="player-result-name" id="result-player1">Player 1</div>
                    <div class="player-result-score" id="result-score1">0</div>
                </div>
                <div class="player-result">
                    <div class="player-result-name" id="result-player2">Player 2</div>
                    <div class="player-result-score" id="result-score2">0</div>
                </div>
            </div>
            <div class="results-buttons">
                <button class="play-again-btn" id="play-again">Play Again</button>
                <button class="new-players-btn" id="new-players">New Players</button>
            </div>
        </div>
    </div>

    <!-- Sound Control -->
    <div class="sound-control" id="sound-control">
        <div class="sound-icon">ðŸ”Š</div>
    </div>

    <!-- Audio Elements -->
    <audio id="background-music" loop>
        <source src="sounds/noncopyright-music-pianos-295174.mp3" type="audio/mpeg">
    </audio>
    <audio id="click-sound">
        <source src="sounds/mixkit-retro-arcade-casino-notification-211.wav" type="audio/mpeg">
    </audio>
    <audio id="win-sound">
        <source src="sounds/sci-fi-congratulations-message-notification-sound-sfx-334728.mp3" type="audio/mpeg">
    </audio>
    <audio id="draw-sound">
        <source src="sounds/game-over-deep-male-voice-clip-352695.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Game state
        const gameState = {
            currentPlayer: 'X',
            player1Name: 'Player 1',
            player2Name: 'Player 2',
            player1Score: 0,
            player2Score: 0,
            round: 1,
            maxRounds: 3,
            board: ['', '', '', '', '', '', '', '', ''],
            gameActive: true,
            soundsEnabled: true
        };

        // DOM Elements
        const introElement = document.getElementById('intro');
        const playerInputElement = document.getElementById('player-input');
        const gameContainerElement = document.getElementById('game-container');
        const instructionsElement = document.getElementById('instructions');
        const resultsElement = document.getElementById('results');
        const gameBoardElement = document.getElementById('game-board');
        const soundControlElement = document.getElementById('sound-control');

        // Audio Elements
        const backgroundMusic = document.getElementById('background-music');
        const clickSound = document.getElementById('click-sound');
        const winSound = document.getElementById('win-sound');
        const drawSound = document.getElementById('draw-sound');

        // Initialize the game
        function initGame() {
            // Create game board cells
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.setAttribute('data-index', i);
                cell.addEventListener('click', () => handleCellClick(i));
                gameBoardElement.appendChild(cell);
            }

            // Start intro animation
            startIntroAnimation();
            
            // Set up event listeners
            document.querySelector('.click-to-continue').addEventListener('click', showPlayerInput);
            document.querySelector('.start-game-btn').addEventListener('click', startGame);
            document.getElementById('restart-round').addEventListener('click', restartRound);
            document.getElementById('new-game').addEventListener('click', newGame);
            document.getElementById('show-instructions').addEventListener('click', showInstructions);
            document.querySelector('.close-instructions').addEventListener('click', hideInstructions);
            document.getElementById('play-again').addEventListener('click', playAgain);
            document.getElementById('new-players').addEventListener('click', newPlayers);
            soundControlElement.addEventListener('click', toggleSound);

            // Try to play background music (autoplay might be blocked by browsers)
            setTimeout(() => {
                if (gameState.soundsEnabled) {
                    backgroundMusic.volume = 0.3;
                    backgroundMusic.play().catch(e => {
                        console.log("Autoplay blocked by browser. User interaction required.");
                    });
                }
            }, 1000);
        }

        // Intro animation
        function startIntroAnimation() {
            const title = document.querySelector('.game-title');
            const subtitle = document.querySelector('.subtitle');
            const heroText = document.querySelector('.hero-text');
            const continueBtn = document.querySelector('.click-to-continue');

            setTimeout(() => {
                title.style.transition = 'opacity 1s ease, transform 1s ease';
                title.style.opacity = '1';
                title.style.transform = 'translateY(0)';
            }, 500);

            setTimeout(() => {
                subtitle.style.transition = 'opacity 1s ease, transform 1s ease';
                subtitle.style.opacity = '1';
                subtitle.style.transform = 'translateY(0)';
            }, 1500);

            setTimeout(() => {
                heroText.style.transition = 'opacity 1s ease, transform 1s ease';
                heroText.style.opacity = '1';
                heroText.style.transform = 'translateY(0)';
            }, 2500);

            setTimeout(() => {
                continueBtn.style.transition = 'opacity 1s ease, transform 1s ease';
                continueBtn.style.opacity = '1';
                continueBtn.style.transform = 'translateY(0)';
            }, 3500);
        }

        // Show player input screen
        function showPlayerInput() {
            playSound(clickSound);
            introElement.style.opacity = '0';
            setTimeout(() => {
                introElement.style.display = 'none';
                playerInputElement.style.display = 'block';
            }, 1000);
        }

        // Start the game
        function startGame() {
            playSound(clickSound);
            
            // Get player names
            const player1Input = document.getElementById('player1');
            const player2Input = document.getElementById('player2');
            
            gameState.player1Name = player1Input.value || 'Player 1';
            gameState.player2Name = player2Input.value || 'Player 2';
            
            // Update UI with player names
            document.getElementById('player1-name').textContent = gameState.player1Name;
            document.getElementById('player2-name').textContent = gameState.player2Name;
            document.getElementById('player1-score').textContent = '0';
            document.getElementById('player2-score').textContent = '0';
            document.getElementById('round-number').textContent = '1/3';
            
            // Show game container
            playerInputElement.style.display = 'none';
            gameContainerElement.style.display = 'block';
            
            // Reset game state
            resetBoard();
            
            // Ensure background music is playing
            if (gameState.soundsEnabled && backgroundMusic.paused) {
                backgroundMusic.play();
            }
        }

        // Handle cell click
        function handleCellClick(index) {
            if (!gameState.gameActive || gameState.board[index] !== '') return;
            
            playSound(clickSound);
            
            // Update board state
            gameState.board[index] = gameState.currentPlayer;
            
            // Update UI
            const cell = document.querySelector(`.cell[data-index="${index}"]`);
            cell.textContent = gameState.currentPlayer;
            cell.classList.add(gameState.currentPlayer.toLowerCase());
            
            // Check for win or draw
            if (checkWin()) {
                endRound(gameState.currentPlayer);
            } else if (checkDraw()) {
                endRound('draw');
            } else {
                // Switch player
                gameState.currentPlayer = gameState.currentPlayer === 'X' ? 'O' : 'X';
                updateActivePlayer();
            }
        }

        // Check for win
        function checkWin() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                [0, 4, 8], [2, 4, 6]             // Diagonals
            ];
            
            return winPatterns.some(pattern => {
                const [a, b, c] = pattern;
                return gameState.board[a] !== '' && 
                       gameState.board[a] === gameState.board[b] && 
                       gameState.board[a] === gameState.board[c];
            });
        }

        // Check for draw
        function checkDraw() {
            return gameState.board.every(cell => cell !== '');
        }

        // Update active player UI
        function updateActivePlayer() {
            const player1Info = document.getElementById('player1-info');
            const player2Info = document.getElementById('player2-info');
            
            if (gameState.currentPlayer === 'X') {
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
            } else {
                player1Info.classList.remove('active');
                player2Info.classList.add('active');
            }
        }

        // End round
        function endRound(winner) {
            gameState.gameActive = false;
            
            if (winner === 'X') {
                gameState.player1Score++;
                playSound(winSound);
            } else if (winner === 'O') {
                gameState.player2Score++;
                playSound(winSound);
            } else {
                playSound(drawSound);
            }
            
            // Update scores
            document.getElementById('player1-score').textContent = gameState.player1Score;
            document.getElementById('player2-score').textContent = gameState.player2Score;
            
            // Check if all rounds are completed
            if (gameState.round >= gameState.maxRounds) {
                setTimeout(showResults, 1500);
            } else {
                // Move to next round
                setTimeout(() => {
                    gameState.round++;
                    document.getElementById('round-number').textContent = `${gameState.round}/${gameState.maxRounds}`;
                    resetBoard();
                }, 1500);
            }
        }

        // Reset board for new round
        function resetBoard() {
            gameState.board = ['', '', '', '', '', '', '', '', ''];
            gameState.currentPlayer = 'X';
            gameState.gameActive = true;
            
            // Clear board UI
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.classList.remove('x', 'o');
            });
            
            updateActivePlayer();
        }

        // Restart current round
        function restartRound() {
            playSound(clickSound);
            resetBoard();
        }

        // Start a new game with same players
        function newGame() {
            playSound(clickSound);
            gameState.player1Score = 0;
            gameState.player2Score = 0;
            gameState.round = 1;
            
            document.getElementById('player1-score').textContent = '0';
            document.getElementById('player2-score').textContent = '0';
            document.getElementById('round-number').textContent = '1/3';
            
            resetBoard();
        }

        // Show instructions
        function showInstructions() {
            playSound(clickSound);
            instructionsElement.style.display = 'block';
            gameContainerElement.style.display = 'none';
        }

        // Hide instructions
        function hideInstructions() {
            playSound(clickSound);
            instructionsElement.style.display = 'none';
            gameContainerElement.style.display = 'block';
        }

        // Show results
        function showResults() {
            // Determine winner and loser
            let winner, loser, winnerScore, loserScore;
            
            if (gameState.player1Score > gameState.player2Score) {
                winner = gameState.player1Name;
                loser = gameState.player2Name;
                winnerScore = gameState.player1Score;
                loserScore = gameState.player2Score;
            } else if (gameState.player2Score > gameState.player1Score) {
                winner = gameState.player2Name;
                loser = gameState.player1Name;
                winnerScore = gameState.player2Score;
                loserScore = gameState.player1Score;
            } else {
                // It's a tie
                winner = "It's a tie!";
                loser = "No one";
                winnerScore = gameState.player1Score;
                loserScore = gameState.player2Score;
            }
            
            // Update results UI
            document.getElementById('winner-message').textContent = 
                winner === "It's a tie!" ? winner : `${winner} Wins!`;
            document.getElementById('loser-message').textContent = 
                winner === "It's a tie!" ? "Both players are equally matched!" : `${loser} Loses!`;
            document.getElementById('result-player1').textContent = gameState.player1Name;
            document.getElementById('result-score1').textContent = gameState.player1Score;
            document.getElementById('result-player2').textContent = gameState.player2Name;
            document.getElementById('result-score2').textContent = gameState.player2Score;
            
            // Show results
            gameContainerElement.style.display = 'none';
            resultsElement.style.display = 'block';
        }

        // Play again with same players
        function playAgain() {
            playSound(clickSound);
            newGame();
            resultsElement.style.display = 'none';
            gameContainerElement.style.display = 'block';
        }

        // Start with new players
        function newPlayers() {
            playSound(clickSound);
            resultsElement.style.display = 'none';
            playerInputElement.style.display = 'block';
            
            // Reset game state
            gameState.player1Score = 0;
            gameState.player2Score = 0;
            gameState.round = 1;
        }

        // Toggle sound
        function toggleSound() {
            gameState.soundsEnabled = !gameState.soundsEnabled;
            
            if (gameState.soundsEnabled) {
                soundControlElement.innerHTML = '<div class="sound-icon">ðŸ”Š</div>';
                backgroundMusic.play();
            } else {
                soundControlElement.innerHTML = '<div class="sound-icon">ðŸ”‡</div>';
                backgroundMusic.pause();
            }
        }

        // Play sound if enabled
        function playSound(sound) {
            if (gameState.soundsEnabled) {
                sound.currentTime = 0;
                sound.play();
            }
        }

        // Initialize the game when the page loads
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>